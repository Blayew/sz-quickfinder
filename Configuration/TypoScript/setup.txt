plugin.tx_szindexedsearch {
	view {
		templateRootPaths {
			100 = {$plugin.tx_szindexedsearch.view.templateRootPath}
		}
		partialRootPaths {
			100 = {$plugin.tx_szindexedsearch.view.partialRootPath}
		}
		layoutRootPaths {
			100 = {$plugin.tx_szindexedsearch.view.layoutRootPath}
		}
	}
	persistence {
		//diese Seiten werden durchsucht (Kommagetrennt)
		storagePid = {$plugin.tx_szindexedsearch.persistence.storagePid}
	}
	features {
		# uncomment the following line to enable the new Property Mapper.
		#rewrittenPropertyMapper = 1
	}
	settings {
		homePageUid = 2
		searchPid = 140

		reg_search_exp = %|%
		max_results = 3
		breadcrumb_seperator = /

		customEnableFields {
			file {
					# commaseperated list of tablefields within the sys_file_reference-table
				fieldname = media
			}
		}

		customSearch {
			page {
				table = Tx_SzIndexedSearch_Domain_Model_Page
				searchFields = title, keywords
			}
			news {
				table = tx_news_domain_model_news
				searchFields = title
			}
			#More examples:
#			documents {
#				table = Tx_SzIndexedSearch_Domain_Model_File
#				searchFields = title
#			}
#			user {
#				table = Tx_SzIndexedSearch_Domain_Model_User
#				searchFields = name
#			}
#			content {
#				table = Tx_SzIndexedSearch_Domain_Model_Content
#				searchFields = header
#			}
#			userFunc {
#				script = /typo3conf/ext/sz_indexed_search/Resources/Public/ExampleScripts/sz_indexed_search.php
#				params {
#					searchFields = title
#				}
#			}
		}
	}

	_CSS_DEFAULT_STYLE (
		.tx-indexedsearch-searchbox-results {
			display: none;
			position: absolute;
			padding: 20px;
			border: 1px solid #ccc;
			background: #fff;
			z-index: 9999;
			width: 240px;
			height: auto;
		}

		.tx-indexedsearch-searchbox-results .ajax-loader {
			width: 32px;
			height: 32px;
			margin: 40px auto;
			background: url(/typo3conf/ext/sz_indexed_search/Resources/Public/Icons/ajax-loader.gif);
		}
	)
}

config.tx_extbase {
	persistence {
		classes {
			Tx_SzIndexedSearch_Domain_Model_Page {
				mapping {
					tableName = pages
				}
			}
			Tx_SzIndexedSearch_Domain_Model_PageLanguageOverlay {
				mapping {
					tableName = pages_language_overlay
				}
			}
			Tx_SzIndexedSearch_Domain_Model_File {
				mapping {
					tableName = sys_file_reference
				}
			}
			Tx_SzIndexedSearch_Domain_Model_User {
				mapping {
					tableName = fe_users
				}
			}
			Tx_SzIndexedSearch_Domain_Model_Content {
				mapping {
					tableName = tt_content
				}
			}
		}
	}
}

ajaxRequest = PAGE
ajaxRequest {
	typeNum = 1402582595
	config.disableAllHeaderCode = 1
	10 = USER
	10 {
		userFunc = tx_extbase_core_bootstrap->run
		pluginName = Pi1
		extensionName = SzIndexedSearch
		switchableControllerActions {
			Search {
				1 = autocomplete
				2 = search
			}
		}
	}

	view =< plugin.tx_szindexedsearch.view
	persistence =< plugin.sz_indexed_search.persistence
	settings =< plugin.sz_indexed_search.settings
}

page {
	includeJS {
		sz_indexed_search = EXT:sz_indexed_search/Resources/Public/Js/main.js
	}
}

lib.tx_szindexedsearch = COA
lib.tx_szindexedsearch {
	10 = USER
	10 {
		userFunc = tx_extbase_core_bootstrap->run
		pluginName = Pi1
		extensionName = SzIndexedSearch
		switchableControllerActions {
			Search {
				1 = index
				2 = search
			}
		}

		settings =< plugin.tx_szindexedsearch.settings
		persistence =< plugin.tx_szindexedsearch.persistence
		view =< plugin.tx_szindexedsearch.view
	}

}