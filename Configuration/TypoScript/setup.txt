page {
	includeJS {
		sz_indexed_search_autocomplete = EXT:sz_indexed_search/Resources/Public/Javascript/autocomplete.js
		sz_indexed_search = EXT:sz_indexed_search/Resources/Public/Javascript/main.js
	}
	includeCSS {
		sz_indexed_search_autocomplete = EXT:sz_indexed_search/Resources/Public/Css/main.css
	}
}

plugin.tx_szindexedsearch {
	settings {
		pageroot = {$global.search.pageroot}
		homePageUid = {$global.homePageUid}

		enable_documents = 1
		show_breadcrumbs_to_documents = 0
		reg_search_exp = %|%
		max_results = 3
		highlight_search_results = 1
		additional_button = 0

		customSearch {
			Pages {
				table = pages
				searchFields = title, keywords
				where = doktype !=4, doktype !=254, nav_hide=0
				###{$breadcrumbs} is reserved
				title = {$title}
				linkField = uid
				important = 1
			}
		}
	}

	# Override or add translations here:
#	_LOCAL_LANG {
#		de {
#			pages = Seiten
#		}
#		en {
#			pages = Pages
#		}
#	}
}

plugin.tx_indexedsearch {
	plugin.tx_indexedsearch.search.rootPidList = {$global.search.pageroot}
	templateFile =  EXT:sz_indexed_search/Template/indexed_search.html
}

lib.contents {
 	# Search form
	search = COA
	search {
		10 = TEXT
		10 {
			dataWrap = <form action="|" class="search-form" method="post">
			typolink {
				parameter = {$global.pages.search}
				returnLast = url
			}
		}
		20 = TEXT
		20 {
			wrap (
				<fieldset>
					<input id="searchbox-sword" name="tx_indexedsearch[sword]" type="text" value="|" class="tx-indexedsearch-searchbox-sword search" />
					<input type="submit" />
				</fieldset>
				</form>
			)
		}
	}
}

lib.templates.base.variables.search =< lib.contents.search
