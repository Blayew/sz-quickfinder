plugin.tx_szindexedsearch {
	view {
		templateRootPaths {
			100 = {$plugin.tx_szindexedsearch.view.templateRootPath}
		}
		partialRootPaths {
			100 = {$plugin.tx_szindexedsearch.view.partialRootPath}
		}
		layoutRootPaths {
			100 = {$plugin.tx_szindexedsearch.view.layoutRootPath}
		}
	}
	persistence {
		//diese Seiten werden durchsucht (Kommagetrennt)
		storagePid = {$plugin.tx_szindexedsearch.persistence.storagePid}
	}
	features {
		# uncomment the following line to enable the new Property Mapper.
		#rewrittenPropertyMapper = 1
	}
	settings {
		homePageUid = 2
		searchPid = 140

		global {
			regEx = %|%
			maxResults = 3
			breadcrumbSeparator = /
			includeNavHiddenPages = 0
		}

		customSearch {
			page {
				model = Sunzinet\SzIndexedSearch\Domain\Model\Page
				searchFields = title, keywords
				regEx = |%
#				orderings
			}
			news {
				model = Sunzinet\SzIndexedSearch\Domain\Model\News
				searchFields = title
			}
			#More examples:
			documents {
				model = Sunzinet\SzIndexedSearch\Domain\Model\File
				searchFields = title
			}
			user {
				model = Sunzinet\SzIndexedSearch\Domain\Model\User
				searchFields = name
			}
			content {
				model = Sunzinet\SzIndexedSearch\Domain\Model\Content
				searchFields = header
			}
#			userFunc {
#				script = /typo3conf/ext/sz_indexed_search/Resources/Public/ExampleScripts/sz_indexed_search.php
#				params {
#					searchFields = title
#				}
#			}
		}
	}

	_CSS_DEFAULT_STYLE (
		.tx-indexedsearch-searchbox-results {
			display: none;
			position: absolute;
			padding: 20px;
			border: 1px solid #ccc;
			background: #fff;
			z-index: 9999;
			width: 240px;
			height: auto;
		}

		.tx-indexedsearch-searchbox-results .ajax-loader {
			width: 32px;
			height: 32px;
			margin: 40px auto;
			background: url(/typo3conf/ext/sz_indexed_search/Resources/Public/Icons/ajax-loader.gif);
		}
	)
}

config.tx_extbase {
	persistence {
		classes {
			Sunzinet\SzIndexedSearch\Domain\Model\Page {
				mapping {
					tableName = pages
				}
			}
			Sunzinet\SzIndexedSearch\Domain\Model\PageLanguageOverlay {
				mapping {
					tableName = pages_language_overlay
				}
			}
			Sunzinet\SzIndexedSearch\Domain\Model\News {
				mapping {
					tableName = tx_news_domain_model_news
				}
			}
			Sunzinet\SzIndexedSearch\Domain\Model\File {
				mapping {
					tableName = sys_file_reference
				}
			}
			Sunzinet\SzIndexedSearch\Domain\Model\User {
				mapping {
					tableName = fe_users
				}
			}
			Sunzinet\SzIndexedSearch\Domain\Model\Content {
				mapping {
					tableName = tt_content
				}
			}
		}
	}
}

ajaxRequest = PAGE
ajaxRequest {
	typeNum = 1402582595
	config.disableAllHeaderCode = 1
	10 = USER
	10 {
		userFunc = \TYPO3\CMS\Extbase\Core\Bootstrap->run
		pluginName = Pi1
		extensionName = SzIndexedSearch
		vendorName = Sunzinet
		switchableControllerActions {
			Search {
				1 = autocomplete
				2 = search
			}
		}
	}

	view =< plugin.tx_szindexedsearch.view
	persistence =< plugin.sz_indexed_search.persistence
	settings =< plugin.sz_indexed_search.settings
}

page {
	includeJS {
		sz_indexed_search = EXT:sz_indexed_search/Resources/Public/Js/main.js
	}
}

lib.tx_szindexedsearch = COA
lib.tx_szindexedsearch {
	10 = USER
	10 {
		userFunc = \TYPO3\CMS\Extbase\Core\Bootstrap->run
		pluginName = Pi1
		extensionName = SzIndexedSearch
		vendorName = Sunzinet
		switchableControllerActions {
			Search {
				1 = index
				2 = search
			}
		}

		settings =< plugin.tx_szindexedsearch.settings
		persistence =< plugin.tx_szindexedsearch.persistence
		view =< plugin.tx_szindexedsearch.view
	}

}
